#!/bin/bash

# @PACKAGE@-@VERSION@ (libxenesis-ssh.so) #

# Copyright (C) 2014 Antonio Cao (@burzumishi) #

# This is free software;
# You have unlimited permission to copy and/or distribute it,
# with or without modifications, as long as this notice is preserved.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.

# Xenesis SSH Library #

# libxenesis-ssh.so: SSH functions and definitions #

function check_ssh {

	host="$1";

        # Comprobar que responde a ssh para hpux
        TEST_SSH=$(@libdir@/libxenesis-sshnopass.so $BASH -c "$SSH -o StrictHostKeyChecking=no $SSHUSER@${host} -n \"$LS\" 2>&1");

        if [ ! -z "$($ECHO $TEST_SSH | $GREP disconnect)" ]; then
        	echolog "$ERROR! $host can't be accessed with SSH.";
        	return $false;
        else
        	echolog "$OK! $host can be accessed as <$SSHUSER>."
		return $true;
        fi;
}

